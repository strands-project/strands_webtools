<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <!-- The default styling is provided by http://getbootstrap.com -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css" />

    <!-- jQuery and display.js are conveniences for interacting with the DOM -->
    <script src="js/jquery.js"></script>
    <script src="js/display.js"></script>

    <!-- ROSLIBJS -->
    <!-- EventEmitter2 is the sole dependency of roslibjs -->
    <script src="js/eventemitter2.js"></script>
    <!-- Roslibjs handles core ROS functionality in the browser -->
    <script src="js/roslib.js"></script>

    <!-- ROS2DJS -->
    <!-- EaselJS is a dependency of ros2djs -->
    <script src="js/easeljs.js"></script>
    <!-- Ros2djs provides 2D scene support, including mapping and more -->
    <script src="js/ros2d.js"></script>

    <!-- ROS3DJS -->
    <!-- Three.js is the WebGL rendering library -->
    <script src="js/three.js"></script>
    <!-- ColladaLoader2 loads collada models of the robot -->
    <script src="js/ColladaLoader2.js"></script>
    <!-- Ros3djs provides 3D scene support, including mapping and more -->
    <script src="js/ros3d.js"></script>
    
    <script type="text/javascript" src="js/mjpegcanvas.js"></script>

    <script type="text/javascript" src="js/jquery-ui.js"></script>

    <script type="text/javascript" src="js/keyboardteleop.js"></script>

    <script type="text/javascript">
      /**
      * Setup all GUI elements when the page is loaded.
      */
      function init() {
      // Connecting to ROS.
      var ros = new ROSLIB.Ros({
      url : 'ws://localhost:9090'
      });

      // Initialize the teleop.
      var teleop = new KEYBOARDTELEOP.Teleop({
      ros : ros,
      topic : '/cmd_vel'
      });

      // Create a UI slider using JQuery UI.
      $('#speed-slider').slider({
      range : 'min',
      min : 0,
      max : 100,
      value : 90,
      slide : function(event, ui) {
      // Change the speed label.
      $('#speed-label').html('Speed: ' + ui.value + '%');
      // Scale the speed.
      teleop.scale = (ui.value / 100.0);
      }
      });

      // Set the initial speed .
      $('#speed-label').html('Speed: ' + ($('#speed-slider').slider('value')) + '%');
      teleop.scale = ($('#speed-slider').slider('value') / 100.0);
      
      // Create the main viewer.
      var viewer = new MJPEGCANVAS.Viewer({
      divID : 'mjpeg',
      host : 'localhost',
      width : 640,
      height : 480,
      topic : '/videocam/image'
      });
      }
    </script>
  </head>

  <body onload="init()">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">strands_webtools</a>
      </div>
    </div>
    <div class="container">
      <h1><small>Simple keyboard control</small></h1>
      <ul>
        <li>w/s  to move forward and backward</li>
        <li>a/d  to move left and right</li>
      </ul>
      <div id="speed-label"></div>
      <div id="speed-slider"></div>
    
      <h1><small>Robot cam</small></h1>
      <div id="mjpeg"></div>
    </div>

  </body>
</html>
